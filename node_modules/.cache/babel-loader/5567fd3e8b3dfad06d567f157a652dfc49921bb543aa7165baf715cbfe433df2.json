{"ast":null,"code":"exports.createBodyReader = createBodyReader;\nexports._readNumberingProperties = readNumberingProperties;\nvar dingbatToUnicode = require(\"dingbat-to-unicode\");\nvar _ = require(\"underscore\");\nvar documents = require(\"../documents\");\nvar Result = require(\"../results\").Result;\nvar warning = require(\"../results\").warning;\nvar uris = require(\"./uris\");\nfunction createBodyReader(options) {\n  return {\n    readXmlElement: function (element) {\n      return new BodyReader(options).readXmlElement(element);\n    },\n    readXmlElements: function (elements) {\n      return new BodyReader(options).readXmlElements(elements);\n    }\n  };\n}\nfunction BodyReader(options) {\n  var complexFieldStack = [];\n  var currentInstrText = [];\n  var relationships = options.relationships;\n  var contentTypes = options.contentTypes;\n  var docxFile = options.docxFile;\n  var files = options.files;\n  var numbering = options.numbering;\n  var styles = options.styles;\n  function readXmlElements(elements) {\n    var results = elements.map(readXmlElement);\n    return combineResults(results);\n  }\n  function readXmlElement(element) {\n    if (element.type === \"element\") {\n      var handler = xmlElementReaders[element.name];\n      if (handler) {\n        return handler(element);\n      } else if (!Object.prototype.hasOwnProperty.call(ignoreElements, element.name)) {\n        var message = warning(\"An unrecognised element was ignored: \" + element.name);\n        return emptyResultWithMessages([message]);\n      }\n    }\n    return emptyResult();\n  }\n  function readParagraphIndent(element) {\n    return {\n      start: element.attributes[\"w:start\"] || element.attributes[\"w:left\"],\n      end: element.attributes[\"w:end\"] || element.attributes[\"w:right\"],\n      firstLine: element.attributes[\"w:firstLine\"],\n      hanging: element.attributes[\"w:hanging\"]\n    };\n  }\n  function readRunProperties(element) {\n    return readRunStyle(element).map(function (style) {\n      var fontSizeString = element.firstOrEmpty(\"w:sz\").attributes[\"w:val\"];\n      // w:sz gives the font size in half points, so halve the value to get the size in points\n      var fontSize = /^[0-9]+$/.test(fontSizeString) ? parseInt(fontSizeString, 10) / 2 : null;\n      return {\n        type: \"runProperties\",\n        styleId: style.styleId,\n        styleName: style.name,\n        verticalAlignment: element.firstOrEmpty(\"w:vertAlign\").attributes[\"w:val\"],\n        font: element.firstOrEmpty(\"w:rFonts\").attributes[\"w:ascii\"],\n        fontSize: fontSize,\n        isBold: readBooleanElement(element.first(\"w:b\")),\n        isUnderline: readUnderline(element.first(\"w:u\")),\n        isItalic: readBooleanElement(element.first(\"w:i\")),\n        isStrikethrough: readBooleanElement(element.first(\"w:strike\")),\n        isAllCaps: readBooleanElement(element.first(\"w:caps\")),\n        isSmallCaps: readBooleanElement(element.first(\"w:smallCaps\"))\n      };\n    });\n  }\n  function readUnderline(element) {\n    if (element) {\n      var value = element.attributes[\"w:val\"];\n      return value !== undefined && value !== \"false\" && value !== \"0\" && value !== \"none\";\n    } else {\n      return false;\n    }\n  }\n  function readBooleanElement(element) {\n    if (element) {\n      var value = element.attributes[\"w:val\"];\n      return value !== \"false\" && value !== \"0\";\n    } else {\n      return false;\n    }\n  }\n  function readParagraphStyle(element) {\n    return readStyle(element, \"w:pStyle\", \"Paragraph\", styles.findParagraphStyleById);\n  }\n  function readRunStyle(element) {\n    return readStyle(element, \"w:rStyle\", \"Run\", styles.findCharacterStyleById);\n  }\n  function readTableStyle(element) {\n    return readStyle(element, \"w:tblStyle\", \"Table\", styles.findTableStyleById);\n  }\n  function readStyle(element, styleTagName, styleType, findStyleById) {\n    var messages = [];\n    var styleElement = element.first(styleTagName);\n    var styleId = null;\n    var name = null;\n    if (styleElement) {\n      styleId = styleElement.attributes[\"w:val\"];\n      if (styleId) {\n        var style = findStyleById(styleId);\n        if (style) {\n          name = style.name;\n        } else {\n          messages.push(undefinedStyleWarning(styleType, styleId));\n        }\n      }\n    }\n    return elementResultWithMessages({\n      styleId: styleId,\n      name: name\n    }, messages);\n  }\n  var unknownComplexField = {\n    type: \"unknown\"\n  };\n  function readFldChar(element) {\n    var type = element.attributes[\"w:fldCharType\"];\n    if (type === \"begin\") {\n      complexFieldStack.push(unknownComplexField);\n      currentInstrText = [];\n    } else if (type === \"end\") {\n      complexFieldStack.pop();\n    } else if (type === \"separate\") {\n      var hyperlinkOptions = parseHyperlinkFieldCode(currentInstrText.join(''));\n      var complexField = hyperlinkOptions === null ? unknownComplexField : {\n        type: \"hyperlink\",\n        options: hyperlinkOptions\n      };\n      complexFieldStack.pop();\n      complexFieldStack.push(complexField);\n    }\n    return emptyResult();\n  }\n  function currentHyperlinkOptions() {\n    var topHyperlink = _.last(complexFieldStack.filter(function (complexField) {\n      return complexField.type === \"hyperlink\";\n    }));\n    return topHyperlink ? topHyperlink.options : null;\n  }\n  function parseHyperlinkFieldCode(code) {\n    var externalLinkResult = /\\s*HYPERLINK \"(.*)\"/.exec(code);\n    if (externalLinkResult) {\n      return {\n        href: externalLinkResult[1]\n      };\n    }\n    var internalLinkResult = /\\s*HYPERLINK\\s+\\\\l\\s+\"(.*)\"/.exec(code);\n    if (internalLinkResult) {\n      return {\n        anchor: internalLinkResult[1]\n      };\n    }\n    return null;\n  }\n  function readInstrText(element) {\n    currentInstrText.push(element.text());\n    return emptyResult();\n  }\n  function readSymbol(element) {\n    // See 17.3.3.30 sym (Symbol Character) of ECMA-376 4th edition Part 1\n    var font = element.attributes[\"w:font\"];\n    var char = element.attributes[\"w:char\"];\n    var unicodeCharacter = dingbatToUnicode.hex(font, char);\n    if (unicodeCharacter == null && /^F0..$/.test(char)) {\n      unicodeCharacter = dingbatToUnicode.hex(font, char.substring(2));\n    }\n    if (unicodeCharacter == null) {\n      return emptyResultWithMessages([warning(\"A w:sym element with an unsupported character was ignored: char \" + char + \" in font \" + font)]);\n    } else {\n      return elementResult(new documents.Text(unicodeCharacter.string));\n    }\n  }\n  function noteReferenceReader(noteType) {\n    return function (element) {\n      var noteId = element.attributes[\"w:id\"];\n      return elementResult(new documents.NoteReference({\n        noteType: noteType,\n        noteId: noteId\n      }));\n    };\n  }\n  function readCommentReference(element) {\n    return elementResult(documents.commentReference({\n      commentId: element.attributes[\"w:id\"]\n    }));\n  }\n  function readChildElements(element) {\n    return readXmlElements(element.children);\n  }\n  var xmlElementReaders = {\n    \"w:p\": function (element) {\n      return readXmlElements(element.children).map(function (children) {\n        var properties = _.find(children, isParagraphProperties);\n        return new documents.Paragraph(children.filter(negate(isParagraphProperties)), properties);\n      }).insertExtra();\n    },\n    \"w:pPr\": function (element) {\n      return readParagraphStyle(element).map(function (style) {\n        return {\n          type: \"paragraphProperties\",\n          styleId: style.styleId,\n          styleName: style.name,\n          alignment: element.firstOrEmpty(\"w:jc\").attributes[\"w:val\"],\n          numbering: readNumberingProperties(style.styleId, element.firstOrEmpty(\"w:numPr\"), numbering),\n          indent: readParagraphIndent(element.firstOrEmpty(\"w:ind\"))\n        };\n      });\n    },\n    \"w:r\": function (element) {\n      return readXmlElements(element.children).map(function (children) {\n        var properties = _.find(children, isRunProperties);\n        children = children.filter(negate(isRunProperties));\n        var hyperlinkOptions = currentHyperlinkOptions();\n        if (hyperlinkOptions !== null) {\n          children = [new documents.Hyperlink(children, hyperlinkOptions)];\n        }\n        return new documents.Run(children, properties);\n      });\n    },\n    \"w:rPr\": readRunProperties,\n    \"w:fldChar\": readFldChar,\n    \"w:instrText\": readInstrText,\n    \"w:t\": function (element) {\n      return elementResult(new documents.Text(element.text()));\n    },\n    \"w:tab\": function (element) {\n      return elementResult(new documents.Tab());\n    },\n    \"w:noBreakHyphen\": function () {\n      return elementResult(new documents.Text(\"\\u2011\"));\n    },\n    \"w:softHyphen\": function (element) {\n      return elementResult(new documents.Text(\"\\u00AD\"));\n    },\n    \"w:sym\": readSymbol,\n    \"w:hyperlink\": function (element) {\n      var relationshipId = element.attributes[\"r:id\"];\n      var anchor = element.attributes[\"w:anchor\"];\n      return readXmlElements(element.children).map(function (children) {\n        function create(options) {\n          var targetFrame = element.attributes[\"w:tgtFrame\"] || null;\n          return new documents.Hyperlink(children, _.extend({\n            targetFrame: targetFrame\n          }, options));\n        }\n        if (relationshipId) {\n          var href = relationships.findTargetByRelationshipId(relationshipId);\n          if (anchor) {\n            href = uris.replaceFragment(href, anchor);\n          }\n          return create({\n            href: href\n          });\n        } else if (anchor) {\n          return create({\n            anchor: anchor\n          });\n        } else {\n          return children;\n        }\n      });\n    },\n    \"w:tbl\": readTable,\n    \"w:tr\": readTableRow,\n    \"w:tc\": readTableCell,\n    \"w:footnoteReference\": noteReferenceReader(\"footnote\"),\n    \"w:endnoteReference\": noteReferenceReader(\"endnote\"),\n    \"w:commentReference\": readCommentReference,\n    \"w:br\": function (element) {\n      var breakType = element.attributes[\"w:type\"];\n      if (breakType == null || breakType === \"textWrapping\") {\n        return elementResult(documents.lineBreak);\n      } else if (breakType === \"page\") {\n        return elementResult(documents.pageBreak);\n      } else if (breakType === \"column\") {\n        return elementResult(documents.columnBreak);\n      } else {\n        return emptyResultWithMessages([warning(\"Unsupported break type: \" + breakType)]);\n      }\n    },\n    \"w:bookmarkStart\": function (element) {\n      var name = element.attributes[\"w:name\"];\n      if (name === \"_GoBack\") {\n        return emptyResult();\n      } else {\n        return elementResult(new documents.BookmarkStart({\n          name: name\n        }));\n      }\n    },\n    \"mc:AlternateContent\": function (element) {\n      return readChildElements(element.first(\"mc:Fallback\"));\n    },\n    \"w:sdt\": function (element) {\n      return readXmlElements(element.firstOrEmpty(\"w:sdtContent\").children);\n    },\n    \"w:ins\": readChildElements,\n    \"w:object\": readChildElements,\n    \"w:smartTag\": readChildElements,\n    \"w:drawing\": readChildElements,\n    \"w:pict\": function (element) {\n      return readChildElements(element).toExtra();\n    },\n    \"v:roundrect\": readChildElements,\n    \"v:shape\": readChildElements,\n    \"v:textbox\": readChildElements,\n    \"w:txbxContent\": readChildElements,\n    \"wp:inline\": readDrawingElement,\n    \"wp:anchor\": readDrawingElement,\n    \"v:imagedata\": readImageData,\n    \"v:group\": readChildElements,\n    \"v:rect\": readChildElements\n  };\n  return {\n    readXmlElement: readXmlElement,\n    readXmlElements: readXmlElements\n  };\n  function readTable(element) {\n    var propertiesResult = readTableProperties(element.firstOrEmpty(\"w:tblPr\"));\n    return readXmlElements(element.children).flatMap(calculateRowSpans).flatMap(function (children) {\n      return propertiesResult.map(function (properties) {\n        return documents.Table(children, properties);\n      });\n    });\n  }\n  function readTableProperties(element) {\n    return readTableStyle(element).map(function (style) {\n      return {\n        styleId: style.styleId,\n        styleName: style.name\n      };\n    });\n  }\n  function readTableRow(element) {\n    var properties = element.firstOrEmpty(\"w:trPr\");\n    var isHeader = !!properties.first(\"w:tblHeader\");\n    return readXmlElements(element.children).map(function (children) {\n      return documents.TableRow(children, {\n        isHeader: isHeader\n      });\n    });\n  }\n  function readTableCell(element) {\n    return readXmlElements(element.children).map(function (children) {\n      var properties = element.firstOrEmpty(\"w:tcPr\");\n      var gridSpan = properties.firstOrEmpty(\"w:gridSpan\").attributes[\"w:val\"];\n      var colSpan = gridSpan ? parseInt(gridSpan, 10) : 1;\n      var cell = documents.TableCell(children, {\n        colSpan: colSpan\n      });\n      cell._vMerge = readVMerge(properties);\n      return cell;\n    });\n  }\n  function readVMerge(properties) {\n    var element = properties.first(\"w:vMerge\");\n    if (element) {\n      var val = element.attributes[\"w:val\"];\n      return val === \"continue\" || !val;\n    } else {\n      return null;\n    }\n  }\n  function calculateRowSpans(rows) {\n    var unexpectedNonRows = _.any(rows, function (row) {\n      return row.type !== documents.types.tableRow;\n    });\n    if (unexpectedNonRows) {\n      return elementResultWithMessages(rows, [warning(\"unexpected non-row element in table, cell merging may be incorrect\")]);\n    }\n    var unexpectedNonCells = _.any(rows, function (row) {\n      return _.any(row.children, function (cell) {\n        return cell.type !== documents.types.tableCell;\n      });\n    });\n    if (unexpectedNonCells) {\n      return elementResultWithMessages(rows, [warning(\"unexpected non-cell element in table row, cell merging may be incorrect\")]);\n    }\n    var columns = {};\n    rows.forEach(function (row) {\n      var cellIndex = 0;\n      row.children.forEach(function (cell) {\n        if (cell._vMerge && columns[cellIndex]) {\n          columns[cellIndex].rowSpan++;\n        } else {\n          columns[cellIndex] = cell;\n          cell._vMerge = false;\n        }\n        cellIndex += cell.colSpan;\n      });\n    });\n    rows.forEach(function (row) {\n      row.children = row.children.filter(function (cell) {\n        return !cell._vMerge;\n      });\n      row.children.forEach(function (cell) {\n        delete cell._vMerge;\n      });\n    });\n    return elementResult(rows);\n  }\n  function readDrawingElement(element) {\n    var blips = element.getElementsByTagName(\"a:graphic\").getElementsByTagName(\"a:graphicData\").getElementsByTagName(\"pic:pic\").getElementsByTagName(\"pic:blipFill\").getElementsByTagName(\"a:blip\");\n    return combineResults(blips.map(readBlip.bind(null, element)));\n  }\n  function readBlip(element, blip) {\n    var properties = element.first(\"wp:docPr\").attributes;\n    var altText = isBlank(properties.descr) ? properties.title : properties.descr;\n    var blipImageFile = findBlipImageFile(blip);\n    if (blipImageFile === null) {\n      return emptyResultWithMessages([warning(\"Could not find image file for a:blip element\")]);\n    } else {\n      return readImage(blipImageFile, altText);\n    }\n  }\n  function isBlank(value) {\n    return value == null || /^\\s*$/.test(value);\n  }\n  function findBlipImageFile(blip) {\n    var embedRelationshipId = blip.attributes[\"r:embed\"];\n    var linkRelationshipId = blip.attributes[\"r:link\"];\n    if (embedRelationshipId) {\n      return findEmbeddedImageFile(embedRelationshipId);\n    } else if (linkRelationshipId) {\n      var imagePath = relationships.findTargetByRelationshipId(linkRelationshipId);\n      return {\n        path: imagePath,\n        read: files.read.bind(files, imagePath)\n      };\n    } else {\n      return null;\n    }\n  }\n  function readImageData(element) {\n    var relationshipId = element.attributes['r:id'];\n    if (relationshipId) {\n      return readImage(findEmbeddedImageFile(relationshipId), element.attributes[\"o:title\"]);\n    } else {\n      return emptyResultWithMessages([warning(\"A v:imagedata element without a relationship ID was ignored\")]);\n    }\n  }\n  function findEmbeddedImageFile(relationshipId) {\n    var path = uris.uriToZipEntryName(\"word\", relationships.findTargetByRelationshipId(relationshipId));\n    return {\n      path: path,\n      read: docxFile.read.bind(docxFile, path)\n    };\n  }\n  function readImage(imageFile, altText) {\n    var contentType = contentTypes.findContentType(imageFile.path);\n    var image = documents.Image({\n      readImage: imageFile.read,\n      altText: altText,\n      contentType: contentType\n    });\n    var warnings = supportedImageTypes[contentType] ? [] : warning(\"Image of type \" + contentType + \" is unlikely to display in web browsers\");\n    return elementResultWithMessages(image, warnings);\n  }\n  function undefinedStyleWarning(type, styleId) {\n    return warning(type + \" style with ID \" + styleId + \" was referenced but not defined in the document\");\n  }\n}\nfunction readNumberingProperties(styleId, element, numbering) {\n  if (styleId != null) {\n    var levelByStyleId = numbering.findLevelByParagraphStyleId(styleId);\n    if (levelByStyleId != null) {\n      return levelByStyleId;\n    }\n  }\n  var level = element.firstOrEmpty(\"w:ilvl\").attributes[\"w:val\"];\n  var numId = element.firstOrEmpty(\"w:numId\").attributes[\"w:val\"];\n  if (level === undefined || numId === undefined) {\n    return null;\n  } else {\n    return numbering.findLevel(numId, level);\n  }\n}\nvar supportedImageTypes = {\n  \"image/png\": true,\n  \"image/gif\": true,\n  \"image/jpeg\": true,\n  \"image/svg+xml\": true,\n  \"image/tiff\": true\n};\nvar ignoreElements = {\n  \"office-word:wrap\": true,\n  \"v:shadow\": true,\n  \"v:shapetype\": true,\n  \"w:annotationRef\": true,\n  \"w:bookmarkEnd\": true,\n  \"w:sectPr\": true,\n  \"w:proofErr\": true,\n  \"w:lastRenderedPageBreak\": true,\n  \"w:commentRangeStart\": true,\n  \"w:commentRangeEnd\": true,\n  \"w:del\": true,\n  \"w:footnoteRef\": true,\n  \"w:endnoteRef\": true,\n  \"w:tblPr\": true,\n  \"w:tblGrid\": true,\n  \"w:trPr\": true,\n  \"w:tcPr\": true\n};\nfunction isParagraphProperties(element) {\n  return element.type === \"paragraphProperties\";\n}\nfunction isRunProperties(element) {\n  return element.type === \"runProperties\";\n}\nfunction negate(predicate) {\n  return function (value) {\n    return !predicate(value);\n  };\n}\nfunction emptyResultWithMessages(messages) {\n  return new ReadResult(null, null, messages);\n}\nfunction emptyResult() {\n  return new ReadResult(null);\n}\nfunction elementResult(element) {\n  return new ReadResult(element);\n}\nfunction elementResultWithMessages(element, messages) {\n  return new ReadResult(element, null, messages);\n}\nfunction ReadResult(element, extra, messages) {\n  this.value = element || [];\n  this.extra = extra;\n  this._result = new Result({\n    element: this.value,\n    extra: extra\n  }, messages);\n  this.messages = this._result.messages;\n}\nReadResult.prototype.toExtra = function () {\n  return new ReadResult(null, joinElements(this.extra, this.value), this.messages);\n};\nReadResult.prototype.insertExtra = function () {\n  var extra = this.extra;\n  if (extra && extra.length) {\n    return new ReadResult(joinElements(this.value, extra), null, this.messages);\n  } else {\n    return this;\n  }\n};\nReadResult.prototype.map = function (func) {\n  var result = this._result.map(function (value) {\n    return func(value.element);\n  });\n  return new ReadResult(result.value, this.extra, result.messages);\n};\nReadResult.prototype.flatMap = function (func) {\n  var result = this._result.flatMap(function (value) {\n    return func(value.element)._result;\n  });\n  return new ReadResult(result.value.element, joinElements(this.extra, result.value.extra), result.messages);\n};\nfunction combineResults(results) {\n  var result = Result.combine(_.pluck(results, \"_result\"));\n  return new ReadResult(_.flatten(_.pluck(result.value, \"element\")), _.filter(_.flatten(_.pluck(result.value, \"extra\")), identity), result.messages);\n}\nfunction joinElements(first, second) {\n  return _.flatten([first, second]);\n}\nfunction identity(value) {\n  return value;\n}","map":{"version":3,"names":["exports","createBodyReader","_readNumberingProperties","readNumberingProperties","dingbatToUnicode","require","_","documents","Result","warning","uris","options","readXmlElement","element","BodyReader","readXmlElements","elements","complexFieldStack","currentInstrText","relationships","contentTypes","docxFile","files","numbering","styles","results","map","combineResults","type","handler","xmlElementReaders","name","Object","prototype","hasOwnProperty","call","ignoreElements","message","emptyResultWithMessages","emptyResult","readParagraphIndent","start","attributes","end","firstLine","hanging","readRunProperties","readRunStyle","style","fontSizeString","firstOrEmpty","fontSize","test","parseInt","styleId","styleName","verticalAlignment","font","isBold","readBooleanElement","first","isUnderline","readUnderline","isItalic","isStrikethrough","isAllCaps","isSmallCaps","value","undefined","readParagraphStyle","readStyle","findParagraphStyleById","findCharacterStyleById","readTableStyle","findTableStyleById","styleTagName","styleType","findStyleById","messages","styleElement","push","undefinedStyleWarning","elementResultWithMessages","unknownComplexField","readFldChar","pop","hyperlinkOptions","parseHyperlinkFieldCode","join","complexField","currentHyperlinkOptions","topHyperlink","last","filter","code","externalLinkResult","exec","href","internalLinkResult","anchor","readInstrText","text","readSymbol","char","unicodeCharacter","hex","substring","elementResult","Text","string","noteReferenceReader","noteType","noteId","NoteReference","readCommentReference","commentReference","commentId","readChildElements","children","w:p","properties","find","isParagraphProperties","Paragraph","negate","insertExtra","w:pPr","alignment","indent","w:r","isRunProperties","Hyperlink","Run","w:t","w:tab","Tab","w:noBreakHyphen","w:softHyphen","w:hyperlink","relationshipId","create","targetFrame","extend","findTargetByRelationshipId","replaceFragment","readTable","readTableRow","readTableCell","w:br","breakType","lineBreak","pageBreak","columnBreak","w:bookmarkStart","BookmarkStart","mc:AlternateContent","w:sdt","w:pict","toExtra","readDrawingElement","readImageData","propertiesResult","readTableProperties","flatMap","calculateRowSpans","Table","isHeader","TableRow","gridSpan","colSpan","cell","TableCell","_vMerge","readVMerge","val","rows","unexpectedNonRows","any","row","types","tableRow","unexpectedNonCells","tableCell","columns","forEach","cellIndex","rowSpan","blips","getElementsByTagName","readBlip","bind","blip","altText","isBlank","descr","title","blipImageFile","findBlipImageFile","readImage","embedRelationshipId","linkRelationshipId","findEmbeddedImageFile","imagePath","path","read","uriToZipEntryName","imageFile","contentType","findContentType","image","Image","warnings","supportedImageTypes","levelByStyleId","findLevelByParagraphStyleId","level","numId","findLevel","predicate","ReadResult","extra","_result","joinElements","length","func","result","combine","pluck","flatten","identity","second"],"sources":["/home/ismail/React/node_modules/mammoth/lib/docx/body-reader.js"],"sourcesContent":["exports.createBodyReader = createBodyReader;\nexports._readNumberingProperties = readNumberingProperties;\n\nvar dingbatToUnicode = require(\"dingbat-to-unicode\");\nvar _ = require(\"underscore\");\n\nvar documents = require(\"../documents\");\nvar Result = require(\"../results\").Result;\nvar warning = require(\"../results\").warning;\nvar uris = require(\"./uris\");\n\nfunction createBodyReader(options) {\n    return {\n        readXmlElement: function(element) {\n            return new BodyReader(options).readXmlElement(element);\n        },\n        readXmlElements: function(elements) {\n            return new BodyReader(options).readXmlElements(elements);\n        }\n    };\n}\n\nfunction BodyReader(options) {\n    var complexFieldStack = [];\n    var currentInstrText = [];\n    var relationships = options.relationships;\n    var contentTypes = options.contentTypes;\n    var docxFile = options.docxFile;\n    var files = options.files;\n    var numbering = options.numbering;\n    var styles = options.styles;\n\n    function readXmlElements(elements) {\n        var results = elements.map(readXmlElement);\n        return combineResults(results);\n    }\n\n    function readXmlElement(element) {\n        if (element.type === \"element\") {\n            var handler = xmlElementReaders[element.name];\n            if (handler) {\n                return handler(element);\n            } else if (!Object.prototype.hasOwnProperty.call(ignoreElements, element.name)) {\n                var message = warning(\"An unrecognised element was ignored: \" + element.name);\n                return emptyResultWithMessages([message]);\n            }\n        }\n        return emptyResult();\n    }\n\n    function readParagraphIndent(element) {\n        return {\n            start: element.attributes[\"w:start\"] || element.attributes[\"w:left\"],\n            end: element.attributes[\"w:end\"] || element.attributes[\"w:right\"],\n            firstLine: element.attributes[\"w:firstLine\"],\n            hanging: element.attributes[\"w:hanging\"]\n        };\n    }\n\n    function readRunProperties(element) {\n        return readRunStyle(element).map(function(style) {\n            var fontSizeString = element.firstOrEmpty(\"w:sz\").attributes[\"w:val\"];\n            // w:sz gives the font size in half points, so halve the value to get the size in points\n            var fontSize = /^[0-9]+$/.test(fontSizeString) ? parseInt(fontSizeString, 10) / 2 : null;\n\n            return {\n                type: \"runProperties\",\n                styleId: style.styleId,\n                styleName: style.name,\n                verticalAlignment: element.firstOrEmpty(\"w:vertAlign\").attributes[\"w:val\"],\n                font: element.firstOrEmpty(\"w:rFonts\").attributes[\"w:ascii\"],\n                fontSize: fontSize,\n                isBold: readBooleanElement(element.first(\"w:b\")),\n                isUnderline: readUnderline(element.first(\"w:u\")),\n                isItalic: readBooleanElement(element.first(\"w:i\")),\n                isStrikethrough: readBooleanElement(element.first(\"w:strike\")),\n                isAllCaps: readBooleanElement(element.first(\"w:caps\")),\n                isSmallCaps: readBooleanElement(element.first(\"w:smallCaps\"))\n            };\n        });\n    }\n\n    function readUnderline(element) {\n        if (element) {\n            var value = element.attributes[\"w:val\"];\n            return value !== undefined && value !== \"false\" && value !== \"0\" && value !== \"none\";\n        } else {\n            return false;\n        }\n    }\n\n    function readBooleanElement(element) {\n        if (element) {\n            var value = element.attributes[\"w:val\"];\n            return value !== \"false\" && value !== \"0\";\n        } else {\n            return false;\n        }\n    }\n\n    function readParagraphStyle(element) {\n        return readStyle(element, \"w:pStyle\", \"Paragraph\", styles.findParagraphStyleById);\n    }\n\n    function readRunStyle(element) {\n        return readStyle(element, \"w:rStyle\", \"Run\", styles.findCharacterStyleById);\n    }\n\n    function readTableStyle(element) {\n        return readStyle(element, \"w:tblStyle\", \"Table\", styles.findTableStyleById);\n    }\n\n    function readStyle(element, styleTagName, styleType, findStyleById) {\n        var messages = [];\n        var styleElement = element.first(styleTagName);\n        var styleId = null;\n        var name = null;\n        if (styleElement) {\n            styleId = styleElement.attributes[\"w:val\"];\n            if (styleId) {\n                var style = findStyleById(styleId);\n                if (style) {\n                    name = style.name;\n                } else {\n                    messages.push(undefinedStyleWarning(styleType, styleId));\n                }\n            }\n        }\n        return elementResultWithMessages({styleId: styleId, name: name}, messages);\n    }\n\n    var unknownComplexField = {type: \"unknown\"};\n\n    function readFldChar(element) {\n        var type = element.attributes[\"w:fldCharType\"];\n        if (type === \"begin\") {\n            complexFieldStack.push(unknownComplexField);\n            currentInstrText = [];\n        } else if (type === \"end\") {\n            complexFieldStack.pop();\n        } else if (type === \"separate\") {\n            var hyperlinkOptions = parseHyperlinkFieldCode(currentInstrText.join(''));\n            var complexField = hyperlinkOptions === null ? unknownComplexField : {type: \"hyperlink\", options: hyperlinkOptions};\n            complexFieldStack.pop();\n            complexFieldStack.push(complexField);\n        }\n        return emptyResult();\n    }\n\n    function currentHyperlinkOptions() {\n        var topHyperlink = _.last(complexFieldStack.filter(function(complexField) {\n            return complexField.type === \"hyperlink\";\n        }));\n        return topHyperlink ? topHyperlink.options : null;\n    }\n\n    function parseHyperlinkFieldCode(code) {\n        var externalLinkResult = /\\s*HYPERLINK \"(.*)\"/.exec(code);\n        if (externalLinkResult) {\n            return {href: externalLinkResult[1]};\n        }\n\n        var internalLinkResult = /\\s*HYPERLINK\\s+\\\\l\\s+\"(.*)\"/.exec(code);\n        if (internalLinkResult) {\n            return {anchor: internalLinkResult[1]};\n        }\n\n        return null;\n    }\n\n    function readInstrText(element) {\n        currentInstrText.push(element.text());\n        return emptyResult();\n    }\n\n    function readSymbol(element) {\n        // See 17.3.3.30 sym (Symbol Character) of ECMA-376 4th edition Part 1\n        var font = element.attributes[\"w:font\"];\n        var char = element.attributes[\"w:char\"];\n        var unicodeCharacter = dingbatToUnicode.hex(font, char);\n        if (unicodeCharacter == null && /^F0..$/.test(char)) {\n            unicodeCharacter = dingbatToUnicode.hex(font, char.substring(2));\n        }\n\n        if (unicodeCharacter == null) {\n            return emptyResultWithMessages([warning(\n                \"A w:sym element with an unsupported character was ignored: char \" +  char + \" in font \" + font\n            )]);\n        } else {\n            return elementResult(new documents.Text(unicodeCharacter.string));\n        }\n    }\n\n    function noteReferenceReader(noteType) {\n        return function(element) {\n            var noteId = element.attributes[\"w:id\"];\n            return elementResult(new documents.NoteReference({\n                noteType: noteType,\n                noteId: noteId\n            }));\n        };\n    }\n\n    function readCommentReference(element) {\n        return elementResult(documents.commentReference({\n            commentId: element.attributes[\"w:id\"]\n        }));\n    }\n\n    function readChildElements(element) {\n        return readXmlElements(element.children);\n    }\n\n    var xmlElementReaders = {\n        \"w:p\": function(element) {\n            return readXmlElements(element.children)\n                .map(function(children) {\n                    var properties = _.find(children, isParagraphProperties);\n                    return new documents.Paragraph(\n                        children.filter(negate(isParagraphProperties)),\n                        properties\n                    );\n                })\n                .insertExtra();\n        },\n        \"w:pPr\": function(element) {\n            return readParagraphStyle(element).map(function(style) {\n                return {\n                    type: \"paragraphProperties\",\n                    styleId: style.styleId,\n                    styleName: style.name,\n                    alignment: element.firstOrEmpty(\"w:jc\").attributes[\"w:val\"],\n                    numbering: readNumberingProperties(style.styleId, element.firstOrEmpty(\"w:numPr\"), numbering),\n                    indent: readParagraphIndent(element.firstOrEmpty(\"w:ind\"))\n                };\n            });\n        },\n        \"w:r\": function(element) {\n            return readXmlElements(element.children)\n                .map(function(children) {\n                    var properties = _.find(children, isRunProperties);\n                    children = children.filter(negate(isRunProperties));\n\n                    var hyperlinkOptions = currentHyperlinkOptions();\n                    if (hyperlinkOptions !== null) {\n                        children = [new documents.Hyperlink(children, hyperlinkOptions)];\n                    }\n\n                    return new documents.Run(children, properties);\n                });\n        },\n        \"w:rPr\": readRunProperties,\n        \"w:fldChar\": readFldChar,\n        \"w:instrText\": readInstrText,\n        \"w:t\": function(element) {\n            return elementResult(new documents.Text(element.text()));\n        },\n        \"w:tab\": function(element) {\n            return elementResult(new documents.Tab());\n        },\n        \"w:noBreakHyphen\": function() {\n            return elementResult(new documents.Text(\"\\u2011\"));\n        },\n        \"w:softHyphen\": function(element) {\n            return elementResult(new documents.Text(\"\\u00AD\"));\n        },\n        \"w:sym\": readSymbol,\n        \"w:hyperlink\": function(element) {\n            var relationshipId = element.attributes[\"r:id\"];\n            var anchor = element.attributes[\"w:anchor\"];\n            return readXmlElements(element.children).map(function(children) {\n                function create(options) {\n                    var targetFrame = element.attributes[\"w:tgtFrame\"] || null;\n\n                    return new documents.Hyperlink(\n                        children,\n                        _.extend({targetFrame: targetFrame}, options)\n                    );\n                }\n\n                if (relationshipId) {\n                    var href = relationships.findTargetByRelationshipId(relationshipId);\n                    if (anchor) {\n                        href = uris.replaceFragment(href, anchor);\n                    }\n                    return create({href: href});\n                } else if (anchor) {\n                    return create({anchor: anchor});\n                } else {\n                    return children;\n                }\n            });\n        },\n        \"w:tbl\": readTable,\n        \"w:tr\": readTableRow,\n        \"w:tc\": readTableCell,\n        \"w:footnoteReference\": noteReferenceReader(\"footnote\"),\n        \"w:endnoteReference\": noteReferenceReader(\"endnote\"),\n        \"w:commentReference\": readCommentReference,\n        \"w:br\": function(element) {\n            var breakType = element.attributes[\"w:type\"];\n            if (breakType == null || breakType === \"textWrapping\") {\n                return elementResult(documents.lineBreak);\n            } else if (breakType === \"page\") {\n                return elementResult(documents.pageBreak);\n            } else if (breakType === \"column\") {\n                return elementResult(documents.columnBreak);\n            } else {\n                return emptyResultWithMessages([warning(\"Unsupported break type: \" + breakType)]);\n            }\n        },\n        \"w:bookmarkStart\": function(element){\n            var name = element.attributes[\"w:name\"];\n            if (name === \"_GoBack\") {\n                return emptyResult();\n            } else {\n                return elementResult(new documents.BookmarkStart({name: name}));\n            }\n        },\n\n        \"mc:AlternateContent\": function(element) {\n            return readChildElements(element.first(\"mc:Fallback\"));\n        },\n\n        \"w:sdt\": function(element) {\n            return readXmlElements(element.firstOrEmpty(\"w:sdtContent\").children);\n        },\n\n        \"w:ins\": readChildElements,\n        \"w:object\": readChildElements,\n        \"w:smartTag\": readChildElements,\n        \"w:drawing\": readChildElements,\n        \"w:pict\": function(element) {\n            return readChildElements(element).toExtra();\n        },\n        \"v:roundrect\": readChildElements,\n        \"v:shape\": readChildElements,\n        \"v:textbox\": readChildElements,\n        \"w:txbxContent\": readChildElements,\n        \"wp:inline\": readDrawingElement,\n        \"wp:anchor\": readDrawingElement,\n        \"v:imagedata\": readImageData,\n        \"v:group\": readChildElements,\n        \"v:rect\": readChildElements\n    };\n\n    return {\n        readXmlElement: readXmlElement,\n        readXmlElements: readXmlElements\n    };\n\n\n    function readTable(element) {\n        var propertiesResult = readTableProperties(element.firstOrEmpty(\"w:tblPr\"));\n        return readXmlElements(element.children)\n            .flatMap(calculateRowSpans)\n            .flatMap(function(children) {\n                return propertiesResult.map(function(properties) {\n                    return documents.Table(children, properties);\n                });\n            });\n    }\n\n    function readTableProperties(element) {\n        return readTableStyle(element).map(function(style) {\n            return {\n                styleId: style.styleId,\n                styleName: style.name\n            };\n        });\n    }\n\n    function readTableRow(element) {\n        var properties = element.firstOrEmpty(\"w:trPr\");\n        var isHeader = !!properties.first(\"w:tblHeader\");\n        return readXmlElements(element.children).map(function(children) {\n            return documents.TableRow(children, {isHeader: isHeader});\n        });\n    }\n\n    function readTableCell(element) {\n        return readXmlElements(element.children).map(function(children) {\n            var properties = element.firstOrEmpty(\"w:tcPr\");\n\n            var gridSpan = properties.firstOrEmpty(\"w:gridSpan\").attributes[\"w:val\"];\n            var colSpan = gridSpan ? parseInt(gridSpan, 10) : 1;\n\n            var cell = documents.TableCell(children, {colSpan: colSpan});\n            cell._vMerge = readVMerge(properties);\n            return cell;\n        });\n    }\n\n    function readVMerge(properties) {\n        var element = properties.first(\"w:vMerge\");\n        if (element) {\n            var val = element.attributes[\"w:val\"];\n            return val === \"continue\" || !val;\n        } else {\n            return null;\n        }\n    }\n\n    function calculateRowSpans(rows) {\n        var unexpectedNonRows = _.any(rows, function(row) {\n            return row.type !== documents.types.tableRow;\n        });\n        if (unexpectedNonRows) {\n            return elementResultWithMessages(rows, [warning(\n                \"unexpected non-row element in table, cell merging may be incorrect\"\n            )]);\n        }\n        var unexpectedNonCells = _.any(rows, function(row) {\n            return _.any(row.children, function(cell) {\n                return cell.type !== documents.types.tableCell;\n            });\n        });\n        if (unexpectedNonCells) {\n            return elementResultWithMessages(rows, [warning(\n                \"unexpected non-cell element in table row, cell merging may be incorrect\"\n            )]);\n        }\n\n        var columns = {};\n\n        rows.forEach(function(row) {\n            var cellIndex = 0;\n            row.children.forEach(function(cell) {\n                if (cell._vMerge && columns[cellIndex]) {\n                    columns[cellIndex].rowSpan++;\n                } else {\n                    columns[cellIndex] = cell;\n                    cell._vMerge = false;\n                }\n                cellIndex += cell.colSpan;\n            });\n        });\n\n        rows.forEach(function(row) {\n            row.children = row.children.filter(function(cell) {\n                return !cell._vMerge;\n            });\n            row.children.forEach(function(cell) {\n                delete cell._vMerge;\n            });\n        });\n\n        return elementResult(rows);\n    }\n\n    function readDrawingElement(element) {\n        var blips = element\n            .getElementsByTagName(\"a:graphic\")\n            .getElementsByTagName(\"a:graphicData\")\n            .getElementsByTagName(\"pic:pic\")\n            .getElementsByTagName(\"pic:blipFill\")\n            .getElementsByTagName(\"a:blip\");\n\n        return combineResults(blips.map(readBlip.bind(null, element)));\n    }\n\n    function readBlip(element, blip) {\n        var properties = element.first(\"wp:docPr\").attributes;\n        var altText = isBlank(properties.descr) ? properties.title : properties.descr;\n        var blipImageFile = findBlipImageFile(blip);\n        if (blipImageFile === null) {\n            return emptyResultWithMessages([warning(\"Could not find image file for a:blip element\")]);\n        } else {\n            return readImage(blipImageFile, altText);\n        }\n    }\n\n    function isBlank(value) {\n        return value == null || /^\\s*$/.test(value);\n    }\n\n    function findBlipImageFile(blip) {\n        var embedRelationshipId = blip.attributes[\"r:embed\"];\n        var linkRelationshipId = blip.attributes[\"r:link\"];\n        if (embedRelationshipId) {\n            return findEmbeddedImageFile(embedRelationshipId);\n        } else if (linkRelationshipId) {\n            var imagePath = relationships.findTargetByRelationshipId(linkRelationshipId);\n            return {\n                path: imagePath,\n                read: files.read.bind(files, imagePath)\n            };\n        } else {\n            return null;\n        }\n    }\n\n    function readImageData(element) {\n        var relationshipId = element.attributes['r:id'];\n\n        if (relationshipId) {\n            return readImage(\n                findEmbeddedImageFile(relationshipId),\n                element.attributes[\"o:title\"]);\n        } else {\n            return emptyResultWithMessages([warning(\"A v:imagedata element without a relationship ID was ignored\")]);\n        }\n    }\n\n    function findEmbeddedImageFile(relationshipId) {\n        var path = uris.uriToZipEntryName(\"word\", relationships.findTargetByRelationshipId(relationshipId));\n        return {\n            path: path,\n            read: docxFile.read.bind(docxFile, path)\n        };\n    }\n\n    function readImage(imageFile, altText) {\n        var contentType = contentTypes.findContentType(imageFile.path);\n\n        var image = documents.Image({\n            readImage: imageFile.read,\n            altText: altText,\n            contentType: contentType\n        });\n        var warnings = supportedImageTypes[contentType] ?\n            [] : warning(\"Image of type \" + contentType + \" is unlikely to display in web browsers\");\n        return elementResultWithMessages(image, warnings);\n    }\n\n    function undefinedStyleWarning(type, styleId) {\n        return warning(\n            type + \" style with ID \" + styleId + \" was referenced but not defined in the document\");\n    }\n}\n\n\nfunction readNumberingProperties(styleId, element, numbering) {\n    if (styleId != null) {\n        var levelByStyleId = numbering.findLevelByParagraphStyleId(styleId);\n        if (levelByStyleId != null) {\n            return levelByStyleId;\n        }\n    }\n\n    var level = element.firstOrEmpty(\"w:ilvl\").attributes[\"w:val\"];\n    var numId = element.firstOrEmpty(\"w:numId\").attributes[\"w:val\"];\n    if (level === undefined || numId === undefined) {\n        return null;\n    } else {\n        return numbering.findLevel(numId, level);\n    }\n}\n\nvar supportedImageTypes = {\n    \"image/png\": true,\n    \"image/gif\": true,\n    \"image/jpeg\": true,\n    \"image/svg+xml\": true,\n    \"image/tiff\": true\n};\n\nvar ignoreElements = {\n    \"office-word:wrap\": true,\n    \"v:shadow\": true,\n    \"v:shapetype\": true,\n    \"w:annotationRef\": true,\n    \"w:bookmarkEnd\": true,\n    \"w:sectPr\": true,\n    \"w:proofErr\": true,\n    \"w:lastRenderedPageBreak\": true,\n    \"w:commentRangeStart\": true,\n    \"w:commentRangeEnd\": true,\n    \"w:del\": true,\n    \"w:footnoteRef\": true,\n    \"w:endnoteRef\": true,\n    \"w:tblPr\": true,\n    \"w:tblGrid\": true,\n    \"w:trPr\": true,\n    \"w:tcPr\": true\n};\n\nfunction isParagraphProperties(element) {\n    return element.type === \"paragraphProperties\";\n}\n\nfunction isRunProperties(element) {\n    return element.type === \"runProperties\";\n}\n\nfunction negate(predicate) {\n    return function(value) {\n        return !predicate(value);\n    };\n}\n\n\nfunction emptyResultWithMessages(messages) {\n    return new ReadResult(null, null, messages);\n}\n\nfunction emptyResult() {\n    return new ReadResult(null);\n}\n\nfunction elementResult(element) {\n    return new ReadResult(element);\n}\n\nfunction elementResultWithMessages(element, messages) {\n    return new ReadResult(element, null, messages);\n}\n\nfunction ReadResult(element, extra, messages) {\n    this.value = element || [];\n    this.extra = extra;\n    this._result = new Result({\n        element: this.value,\n        extra: extra\n    }, messages);\n    this.messages = this._result.messages;\n}\n\nReadResult.prototype.toExtra = function() {\n    return new ReadResult(null, joinElements(this.extra, this.value), this.messages);\n};\n\nReadResult.prototype.insertExtra = function() {\n    var extra = this.extra;\n    if (extra && extra.length) {\n        return new ReadResult(joinElements(this.value, extra), null, this.messages);\n    } else {\n        return this;\n    }\n};\n\nReadResult.prototype.map = function(func) {\n    var result = this._result.map(function(value) {\n        return func(value.element);\n    });\n    return new ReadResult(result.value, this.extra, result.messages);\n};\n\nReadResult.prototype.flatMap = function(func) {\n    var result = this._result.flatMap(function(value) {\n        return func(value.element)._result;\n    });\n    return new ReadResult(result.value.element, joinElements(this.extra, result.value.extra), result.messages);\n};\n\nfunction combineResults(results) {\n    var result = Result.combine(_.pluck(results, \"_result\"));\n    return new ReadResult(\n        _.flatten(_.pluck(result.value, \"element\")),\n        _.filter(_.flatten(_.pluck(result.value, \"extra\")), identity),\n        result.messages\n    );\n}\n\nfunction joinElements(first, second) {\n    return _.flatten([first, second]);\n}\n\nfunction identity(value) {\n    return value;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}